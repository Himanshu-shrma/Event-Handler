{% extends 'events/base.html' %}
{%block content%}

<h1>Events List</h1>

{%for event in events%}

<div class="card">
    <div class="card-header">
        <b>{{event}}</b>
    </div>
    <div class="card-body">
        <h5 class="card-title">{{ event.venue }}</h5>
        <p class="card-text">
        <ul>
            <li>Date - {{ event.event_date }}</li>

            <li>Manager Name - {{ event.manager }}</li>
            <li>Description - {{ event.description }}</li>
            <li>Total time of Event - {{ event.event_hours }}</li>
            <li> Attendees -
                {% for attendees in event.attendees.all %}
                {{attendees}}
                {%endfor%}
            </li>
            <br>
        </ul>

        </p>

    </div>
    {% if user.is_authenticated and event.manager == user %}

    <div class="card-footer text-muted">
        <a href="{%url 'update-event' event.id %}" class="btn btn-outline-secondary btn-sm">Update</a>
        <a href="{%url 'delete-event' event.id %}" class="btn btn-outline-danger btn-sm">Delete</a>
    </div>
    {%endif%}
</div>
<br><br>

{%endfor %}

<!---
{{events}} <br>
has_previous {{events.has_previous}}<br>
has_next {{events.has_next}}<br>
curr page={{events.number}}<br>
total {{events.paginator.num_pages}}<br>
<br><br><br>
--->

<nav aria-label="Page navigation example">
    <ul class="pagination justify-content-center">
        {% if events.has_previous %}
        <li class="page-item"><a class="page-link" href="?page=1"> &laquo First</a></li>
        <li class="page-item"><a class="page-link" href="?page={{events.previous_page_number}}">Previous</a></li>
        {% endif %}

        {% for i in events.paginator.page_range %}
        {% if i == events.number %}
        <li class="page-item disabled"><a class="page-link" href="#"> {{events.number}}
            </a></li>
        {% else %}
        <li class="page-item"><a class="page-link" href="?page={{i}}">{{ i }}</a></li>
        {%endif%}
        {%endfor%}
        {% if events.has_next %}
        <li class="page-item"><a class="page-link" href="?page={{events.next_page_number}}">Next</a></li>
        <li class="page-item"><a class="page-link" href="?page={{events.paginator.num_pages}}"> Last &raquo </a>
        </li>
        {% endif %}
    </ul>
</nav>
{%endblock%}